<?xml version="1.0"?>
<robot xmlns:xacro="http://ros.org/wiki/xacro" name="z_arm_2442c0">

  <!-- 固定 base_link 到 world -->
  <link name="world"/>

  <joint name="world_to_base" type="fixed">
    <parent link="world"/>
    <child link="base_link"/>
    <origin xyz="0 0 0" rpy="0 0 0"/>
  </joint>

  <!-- 原始内容开始 -->
  <link
    name="base_link">
    <inertial>
      <origin
        xyz="-0.6178 0.59958 0.70792"
        rpy="0 0 0" />
      <mass
        value="951.87" />
      <inertia
        ixx="137.78"
        ixy="0.0044402"
        ixz="-10.933"
        iyy="119.15"
        iyz="-0.00067217"
        izz="158.71" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh filename="file://$(find z_arm_2442c0_model)/meshes/base_link.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="1 1 1 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh filename="file://$(find z_arm_2442c0_model)/meshes/base_link.STL" />
      </geometry>
    </collision>
  </link>
  <link
    name="door_link">
    <inertial>
      <origin
        xyz="0.32048066892287 2.3834458054398E-10 0.562398088143635"
        rpy="0 0 0" />
      <mass
        value="181.651646287815" />
      <inertia
        ixx="48.7702456064344"
        ixy="-1.59733671105852E-10"
        ixz="-10.9325544807547"
        iyy="25.5516862461827"
        iyz="1.39131607597233E-11"
        izz="36.1437519623492" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh filename="file://$(find z_arm_2442c0_model)/meshes/door_link.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="1 1 1 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh filename="file://$(find z_arm_2442c0_model)/meshes/door_link.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="door_joint"
    type="revolute">
    <origin
      xyz="-1.2401 0.6 1.0971"
      rpy="0 0 0" />
    <parent
      link="base_link" />
    <child
      link="door_link" />
    <axis
      xyz="0 -1 0" />
  <limit lower="-1" upper="0.268" effort="10.0" velocity="2.5" />
  </joint>
  <link
    name="base_lift_link">
    <inertial>
      <origin
        xyz="-0.0138235267428053 -0.000617643429039805 0.256337391094087"
        rpy="0 0 0" />
      <mass
        value="2.24198664042392" />
      <inertia
        ixx="0.0506641832977411"
        ixy="7.09367963595699E-05"
        ixz="-0.000147564343759707"
        iyy="0.0494711018646685"
        iyz="-0.000578573299400282"
        izz="0.0102402545016511" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh filename="file://$(find z_arm_2442c0_model)/meshes/base_lift_link.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="1 1 1 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh filename="file://$(find z_arm_2442c0_model)/meshes/base_lift_link.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="base_joint"
    type="fixed">
    <origin
      xyz="-0.97852 0.59917 0.42459"
      rpy="0 0 0" />
    <parent
      link="base_link" />
    <child
      link="base_lift_link" />
    <axis
      xyz="0 0 0" />
  </joint>
  <link
    name="lift_link">
    <inertial>
      <origin
        xyz="-0.0394813607628044 -0.000736121252994326 -0.0372265212000362"
        rpy="0 0 0" />
      <mass
        value="0.993724555380008" />
      <inertia
        ixx="0.000951122396615806"
        ixy="-5.13373343735685E-05"
        ixz="7.33288284051898E-05"
        iyy="0.00342810823599992"
        iyz="-1.00008205904848E-06"
        izz="0.00392520888178525" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh filename="file://$(find z_arm_2442c0_model)/meshes/lift_link.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="1 1 1 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh filename="file://$(find z_arm_2442c0_model)/meshes/lift_link.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="lift_joint"
    type="prismatic">
    <origin
      xyz="0.1207 0.0018675 0.5009"
      rpy="0 0 0" />
    <parent
      link="base_lift_link" />
    <child
      link="lift_link" />
    <axis
      xyz="0 0 -1" />
    <limit lower="-0.068" upper="0.268" effort="10.0" velocity="2.5" />
  </joint>
  <link
    name="revolute_1_link">
    <inertial>
      <origin
        xyz="0.0606601004684422 -0.0932567161478479 -0.0341257142535358"
        rpy="0 0 0" />
      <mass
        value="2.3889549988802" />
      <inertia
        ixx="0.014531129631885"
        ixy="0.00746693434928961"
        ixz="5.15406751826989E-05"
        iyy="0.00789336402236104"
        iyz="-7.92546580618748E-05"
        izz="0.0205254159011504" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh filename="file://$(find z_arm_2442c0_model)/meshes/revolute_1_link.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="1 1 1 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh filename="file://$(find z_arm_2442c0_model)/meshes/revolute_1_link.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="revolute_1_joint"
    type="revolute">
    <origin
      xyz="0.012024 0.00017897 -0.066"
      rpy="0 0 0" />
    <parent
      link="lift_link" />
    <child
      link="revolute_1_link" />
    <axis
      xyz="0 0 1" />
    <limit lower="-0.550" upper="2.59" effort="10.0" velocity="2.5" />
  </joint>
  <link
    name="revolute_2_link">
    <inertial>
      <origin
        xyz="0.0510174015179587 0.0862834154944128 0.0203041362505351"
        rpy="0 0 0" />
      <mass
        value="1.2295144495631" />
      <inertia
        ixx="0.00630447000979999"
        ixy="-0.00305064142878226"
        ixz="-3.98688476250461E-06"
        iyy="0.00294255711521701"
        iyz="-5.99941190124979E-06"
        izz="0.00890314242165485" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh filename="file://$(find z_arm_2442c0_model)/meshes/revolute_2_link.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="1 1 1 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh filename="file://$(find z_arm_2442c0_model)/meshes/revolute_2_link.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="revolute_2_joint"
    type="revolute">
    <origin
      xyz="0.11991 -0.18445 -0.118"
      rpy="0 0 0" />
    <parent
      link="revolute_1_link" />
    <child
      link="revolute_2_link" />
    <axis
      xyz="0 0 -1" />
  <limit lower="-1.056" upper="4.678" effort="10.0" velocity="2.5" />
  </joint>
  <link
    name="revolute_3_link">
    <inertial>
      <origin
        xyz="0.000243780027589846 0.000259647437434044 0.000662357342637421"
        rpy="0 0 0" />
      <mass
        value="0.0445549065520843" />
      <inertia
        ixx="1.84658724230793E-05"
        ixy="1.16123299150103E-07"
        ixz="4.11478557324253E-08"
        iyy="1.85936893619463E-05"
        iyz="6.961350801403E-08"
        izz="3.2800424734752E-05" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh filename="file://$(find z_arm_2442c0_model)/meshes/revolute_3_link.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="1 1 1 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh filename="file://$(find z_arm_2442c0_model)/meshes/revolute_3_link.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="revolute_3_joint"
    type="continuous">
    <origin
      xyz="0.1017 0.17221 -0.006"
      rpy="0 0 0" />
    <parent
      link="revolute_2_link" />
    <child
      link="revolute_3_link" />
    <axis
      xyz="0 0 -1" />
  </joint>
  <link
    name="camera_base_link">
    <inertial>
      <origin
        xyz="0.0931049891166365 -0.000761768996695165 0.0118451156279652"
        rpy="0 0 0" />
      <mass
        value="0.321807581331945" />
      <inertia
        ixx="0.000540440264141487"
        ixy="2.82010553501103E-06"
        ixz="-5.8851237017866E-08"
        iyy="0.00138003001837783"
        iyz="1.26301570313523E-10"
        izz="0.00190511555236014" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh filename="file://$(find z_arm_2442c0_model)/meshes/camera_base_link.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="1 1 1 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh filename="file://$(find z_arm_2442c0_model)/meshes/camera_base_link.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="camera_base_joint"
    type="fixed">
    <origin
      xyz="0 0 -0.015655"
      rpy="0 0 0" />
    <parent
      link="revolute_3_link" />
    <child
      link="camera_base_link" />
    <axis
      xyz="0 0 0" />
  </joint>

  <link name="camera_1_rot_link">
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <box size="0.001 0.001 0.001"/> <!-- 可视化一个小点，或直接省略 -->
      </geometry>
    </visual>
  </link>
  <joint name="camera_1_rot_joint" type="continuous">
    <origin xyz="0.14534 0 0.13089" rpy="0 0 0"/>
    <parent link="camera_base_link"/>
    <child link="camera_1_rot_link"/>
    <axis xyz="0 0 1"/>
  </joint>



  <link
    name="camera_1_link">
    <inertial>
      <origin
        xyz="-0.00203650221406804 -0.000549602386836587 -0.0254478625269233"
        rpy="0 0 0" />
      <mass
        value="0.0230681246047575" />
      <inertia
        ixx="2.80041163711897E-06"
        ixy="-2.07454955997632E-09"
        ixz="9.94356803236955E-10"
        iyy="2.54526957034486E-06"
        iyz="-6.5620549616381E-10"
        izz="2.73325575599856E-06" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh filename="file://$(find z_arm_2442c0_model)/meshes/camera_1_link.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.592156862745098 0.666666666666667 0.682352941176471 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh filename="file://$(find z_arm_2442c0_model)/meshes/camera_1_link.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="camera_1_joint"
    type="fixed">
    <origin xyz="0.0234 0.047416 -0.0145" rpy="0 0 0"/>
    <parent
      link="camera_1_rot_link" />
    <child
      link="camera_1_link" />
    <axis
      xyz="0 0 0" />
  </joint>
  <link
    name="camera_2_link">
    <inertial>
      <origin
        xyz="-0.00203650220050811 -0.000549602349943078 -0.0254478626652848"
        rpy="0 0 0" />
      <mass
        value="0.0230681244154274" />
      <inertia
        ixx="2.80041162977159E-06"
        ixy="-2.07455614253564E-09"
        ixz="9.94356728132775E-10"
        iyy="2.54526956438894E-06"
        iyz="-6.56206058171943E-10"
        izz="2.73325574263675E-06" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh filename="file://$(find z_arm_2442c0_model)/meshes/camera_2_link.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.592156862745098 0.666666666666667 0.682352941176471 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh filename="file://$(find z_arm_2442c0_model)/meshes/camera_2_link.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="camera_2_joint"
    type="fixed">
    <origin xyz="-0.0216 0.047416 -0.0145" rpy="0 0 0"/>
    <parent
      link="camera_1_rot_link" />
    <child
      link="camera_2_link" />
    <axis
      xyz="0 0 0" />
  </joint>
  <link
    name="camera_3_link">
    <inertial>
      <origin
        xyz="-4.00055268708552E-05 2.8830575549553E-05 -0.0695444399884141"
        rpy="0 0 0" />
      <mass
        value="1.45710864588612" />
      <inertia
        ixx="0.00346080248209257"
        ixy="-1.44272618610586E-10"
        ixz="-8.72777874649103E-11"
        iyy="0.00346080682501201"
        iyz="1.8464007560091E-10"
        izz="0.0023545593226906" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh filename="file://$(find z_arm_2442c0_model)/meshes/camera_3_link.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="1 1 1 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh filename="file://$(find z_arm_2442c0_model)/meshes/camera_3_link.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="camera_3_joint"
    type="fixed">
  <origin xyz="-0.00181 -0.025558 0.029" rpy="0 0 0"/>
    <parent
      link="camera_1_rot_link" />
    <child
      link="camera_3_link" />
    <axis
      xyz="0 0 0" />
  </joint>

  <gazebo reference="base_link">
        <self_collide>false</self_collide>
        <gravity>false</gravity>
    </gazebo>
    <gazebo reference="door_link">
        <material>Gazebo/White</material>
        <self_collide>false</self_collide>
        <gravity>false</gravity>
    </gazebo>
    <gazebo reference="base_lift_link">
        <self_collide>false</self_collide>
        <gravity>false</gravity>
    </gazebo>
    <gazebo reference="revolute_1_link">
        <self_collide>false</self_collide>
        <gravity>false</gravity>
    </gazebo>
    <gazebo reference="revolute_2_link">
        <self_collide>false</self_collide>
        <gravity>false</gravity>
    </gazebo>
    <gazebo reference="revolute_3_link">
        <self_collide>false</self_collide>
        <gravity>false</gravity>
    </gazebo>
    <gazebo reference="lift_link">
        <self_collide>false</self_collide>
        <gravity>false</gravity>
    </gazebo>
    <gazebo reference="camera_base_link">
        <self_collide>false</self_collide>
        <gravity>false</gravity>
    </gazebo>
    <gazebo reference="camera_1_rot_link">
        <self_collide>false</self_collide>
        <gravity>false</gravity>
    </gazebo>
    <gazebo reference="camera_1_link">
        <self_collide>false</self_collide>
        <gravity>false</gravity>
    </gazebo>
    <gazebo reference="camera_2_link">
        <self_collide>false</self_collide>
        <gravity>false</gravity>
    </gazebo>
    <gazebo reference="camera_3_link">
        <self_collide>false</self_collide>
        <gravity>false</gravity>
    </gazebo>
    

    <gazebo>
      <is_static>true</is_static>
      <self_collide>true</self_collide>
    </gazebo>

    <!-- 声明ros2_control -->
    <ros2_control name="GazeboSystem" type="system">
        <hardware>
            <plugin>gazebo_ros2_control/GazeboSystem</plugin>
        </hardware>
        <joint name="door_joint">
            <command_interface name="position"/>
            <state_interface name="position">
                <param name="initial_value">0</param>
            </state_interface>
            <state_interface name="velocity"/>
        </joint>
        <joint name="lift_joint">
            <command_interface name="position"/>
            <state_interface name="position">
                <param name="initial_value">0</param>
            </state_interface>
            <state_interface name="velocity"/>
        </joint>
        <joint name="revolute_1_joint">
            <command_interface name="position"/>
            <state_interface name="position">
                <param name="initial_value">-0.767</param>
            </state_interface>
            <state_interface name="velocity"/>
        </joint>
        <joint name="revolute_2_joint">
            <command_interface name="position"/>
            <state_interface name="position">
                <param name="initial_value">-1.343</param>
            </state_interface>
            <state_interface name="velocity"/>
        </joint>
        <joint name="revolute_3_joint">
            <command_interface name="position"/>
            <state_interface name="position">
                <param name="initial_value">0.837</param>
            </state_interface>
            <state_interface name="velocity"/>
        </joint>
        <joint name="camera_1_joint">
            <command_interface name="position"/>
            <state_interface name="position">
                <param name="initial_value">0</param>
            </state_interface>
            <state_interface name="velocity"/>
        </joint>
        <joint name="camera_2_joint">
            <command_interface name="position"/>
            <state_interface name="position">
                <param name="initial_value">0</param>
            </state_interface>
            <state_interface name="velocity"/>
        </joint>
        <joint name="camera_3_joint">
            <command_interface name="position"/>
            <state_interface name="position">
                <param name="initial_value">0</param>
            </state_interface>
            <state_interface name="velocity"/>
        </joint>
        <joint name="camera_1_rot_joint">
            <command_interface name="position"/>
            <state_interface name="position">
                <param name="initial_value">0</param>
            </state_interface>
            <state_interface name="velocity"/>
        </joint>
    </ros2_control>

       <!-- 加载ros2_control插件 -->
    <gazebo>
        <plugin filename="libgazebo_ros2_control.so" name="gazebo_ros2_control">
            <parameters>$(find z_arm_2442c0_model)/config/ros2_controllers.yaml</parameters>
            <robot_param>robot_description</robot_param>
            <robot_param_node>robot_state_publisher</robot_param_node>
        </plugin>
    </gazebo>
</robot>